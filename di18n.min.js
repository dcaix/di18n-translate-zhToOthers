!function (root, factory) {
    "object" == typeof exports && "object" == typeof module ? module.exports = factory() : "function" == typeof define && define.amd ? define([], factory) : "object" == typeof exports ? exports["DI18n"] = factory() : root["DI18n"] = factory()
}(this, function () {
    return function (modules) {
        function __webpack_require__(moduleId) {
            if (installedModules[moduleId]) return installedModules[moduleId].exports;
            var module = installedModules[moduleId] = {exports: {}, id: moduleId, loaded: !1};
            return modules[moduleId].call(module.exports, module, module.exports, __webpack_require__), module.loaded = !0, module.exports
        }

        var installedModules = {};
        return __webpack_require__.m = modules, __webpack_require__.c = installedModules, __webpack_require__.p = "", __webpack_require__(0)
    }([function (module, exports, __webpack_require__) {
        "use strict";
        var _di18n = __webpack_require__(1);
        _di18n.DI18n.Version = "0.0.9", module.exports = _di18n.DI18n
    }, function (module, exports, __webpack_require__) {
        "use strict";

        function _interopRequireDefault(obj) {
            return obj && obj.__esModule ? obj : {"default": obj}
        }

        function _classCallCheck(instance, Constructor) {
            if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function")
        }

        function _possibleConstructorReturn(self, call) {
            if (!self) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !call || "object" != typeof call && "function" != typeof call ? self : call
        }

        function _inherits(subClass, superClass) {
            if ("function" != typeof superClass && null !== superClass) throw new TypeError("Super expression must either be null or a function, not " + typeof superClass);
            subClass.prototype = Object.create(superClass && superClass.prototype, {
                constructor: {
                    value: subClass,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), superClass && (Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass)
        }

        Object.defineProperty(exports, "__esModule", {value: !0}), exports.DI18n = void 0;
        var _createClass = function () {
                function defineProperties(target, props) {
                    for (var i = 0; i < props.length; i++) {
                        var descriptor = props[i];
                        descriptor.enumerable = descriptor.enumerable || !1, descriptor.configurable = !0, "value" in descriptor && (descriptor.writable = !0), Object.defineProperty(target, descriptor.key, descriptor)
                    }
                }

                return function (Constructor, protoProps, staticProps) {
                    return protoProps && defineProperties(Constructor.prototype, protoProps), staticProps && defineProperties(Constructor, staticProps), Constructor
                }
            }(),
            _translate = __webpack_require__(2),
            _translate2 = _interopRequireDefault(_translate),
            _util = __webpack_require__(3),
            CLASS_ATTRIBUTE = "i18n-class",
            IMG_ATTRIBUTE = "i18n-img",
            CONTENT_ATTRIBUTE = "i18n-content",
            PLACEHOLDER_ATTRIBUTE = "i18n-placeholder",
            LOCALE_PATTERN = /\$\{locale}/g,
            noop = function () {
            };
        exports.DI18n = function (_T) {
            function DI18n() {
                var options = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                _classCallCheck(this, DI18n);
                var _this = _possibleConstructorReturn(this, (DI18n.__proto__ || Object.getPrototypeOf(DI18n)).call(this, options));
                return _this.locale = options.locale || "en", _this.messages = options.messages || {}, _this.isReplace = options.isReplace || !1, _this.currMessage = _this.messages[_this.locale], _this.doms = {}, _this.isReplace && (_this.getDoms(), _this.fresh()), _this
            }

            return _inherits(DI18n, _T), _createClass(DI18n, [{
                key: "getDoms", value: function () {
                    this.doms = {
                        classDoms: $("[" + CLASS_ATTRIBUTE + "]"),
                        imgDoms: $("[" + IMG_ATTRIBUTE + "]"),
                        contentDoms: $("[" + CONTENT_ATTRIBUTE + "]"),
                        inputDoms: $("[" + PLACEHOLDER_ATTRIBUTE + "]")
                    }
                }
            }, {
                key: "handlerClass", value: function () {
                    if (this.doms.classDoms && this.doms.classDoms.length)
                        for (var i = 0; i < this.doms.classDoms.length; i++) {
                            var dom = this.doms.classDoms[i];
                            (0, _util.addClass)(dom, dom.getAttribute(CLASS_ATTRIBUTE))
                        }
                }
            }, {
                key: "handlerImg", value: function () {
                    if (this.doms.imgDoms && this.doms.imgDoms.length)
                        for (var i = 0; i < this.doms.imgDoms.length; i++) {
                            var dom = this.doms.imgDoms[i],
                                src = dom.getAttribute(IMG_ATTRIBUTE).replace(LOCALE_PATTERN, this.locale);
                            dom.src = src
                        }
                }
            }, {
                key: "handlerContent", value: function () {
                    if (this.doms.contentDoms && this.doms.contentDoms.length)
                        for (var i = 0; i < this.doms.contentDoms.length; i++) {
                            var dom = this.doms.contentDoms[i],
                                content = dom.getAttribute(CONTENT_ATTRIBUTE);
                            dom.innerHTML = this.messages[this.locale][content]
                        }
                }
            }, {
                key: "handlerInput", value: function () {
                    if (this.doms.inputDoms && this.doms.inputDoms.length)
                        for (var i = 0; i < this.doms.inputDoms.length; i++) {
                            var dom = this.doms.inputDoms[i],
                                placeHolderKey = dom.getAttribute(PLACEHOLDER_ATTRIBUTE);
                            dom.setAttribute("placeholder", this.currMessage[placeHolderKey])
                        }
                }
            }, {
                key: "fresh", value: function () {
                    this.handlerClass(), this.handlerImg(), this.handlerContent(), this.handlerInput()
                }
            }, {
                key: "setLocale", value: function (locale) {
                    var cb = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : noop;
                    this.locale = locale, this.fresh(), cb()
                }
            }, {
                key: "loadJs", value: function (src, cb) {
                    var script = document.createElement("script");
                    script.src = src, script.onload = script.onreadystatechange = function () {
                        "loaded" !== script.readyState && "complete" !== script.readyState || cb && cb()
                    }, document.getElementsByTagName[head][0].appendChild(script)
                }
            }, {
                key: "setMessages", value: function (obj) {
                    this.messages = obj
                }
            }]), DI18n
        }(_translate2["default"])
    }, function (module, exports) {
        "use strict";

        function _classCallCheck(instance, Constructor) {
            if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function")
        }

        Object.defineProperty(exports, "__esModule", {value: !0});
        var _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) {
                return typeof obj
            } : function (obj) {
                return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj
            },
            _createClass = function () {
                function defineProperties(target, props) {
                    for (var i = 0; i < props.length; i++) {
                        var descriptor = props[i];
                        descriptor.enumerable = descriptor.enumerable || !1, descriptor.configurable = !0, "value" in descriptor && (descriptor.writable = !0), Object.defineProperty(target, descriptor.key, descriptor)
                    }
                }

                return function (Constructor, protoProps, staticProps) {
                    return protoProps && defineProperties(Constructor.prototype, protoProps), staticProps && defineProperties(Constructor, staticProps), Constructor
                }
            }(),
            T = function () {
                function T(options) {
                    _classCallCheck(this, T), this.locale = options.locale || "zh", this.messages = options.messages || {}
                }

                return _createClass(T, [{
                    key: "$t", value: function (key) {
                        for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) args[_key - 1] = arguments[_key];
                        var str = String(this.messages[this.locale][key]);
                        args = 1 === args.length && "object" === _typeof(args[0]) ? args[0] : {}, args && args.hasOwnProperty || (args = {});
                        var RE_NARGS = /(%|)\{([0-9a-zA-Z_]+)\}/g;
                        return str.replace(RE_NARGS, function (match, prefix, i, index) {
                            var result = "";
                            return "{" === str[index - 1] && "}" === str[index + match.length] ? i : (result = args.hasOwnProperty(i) ? args[i] : match, result ? result : "")
                        })
                    }
                }, {
                    key: "$html", value: function (content) {
                        var _this = this;
                        content = String(content);
                        var RE_NARGS = /\$\{locale\}|\$t\(['"]([\s\S]+?)['"]\)/g;
                        return content.replace(RE_NARGS, function (match, prefix, i, index) {
                            return "${locale}" === match ? _this.locale : _this.messages[_this.locale][prefix] || prefix
                        })
                    }
                }]), T
            }();
        exports["default"] = T
    }, function (module, exports) {
        "use strict";

        function hasClass(ele, cls) {
            return new RegExp(cls).test(ele.className || "")
        }

        function addClass(ele, cls) {
            var _pattern = new RegExp(cls);
            return _pattern.test(ele.className) || (ele.className += " " + cls), ele
        }

        function removeClass(ele, cls) {
            if (ele && 1 === ele.nodeType) {
                var _pattern = new RegExp(cls);
                return _pattern.test(ele.className || "") && (ele.className = ele.className.replace(_pattern, "")), ele
            }
        }

        Object.defineProperty(exports, "__esModule", {value: !0}), exports.hasClass = hasClass, exports.addClass = addClass, exports.removeClass = removeClass
    }])
});